db.createCollection("links", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: ["url", "domain"],
      properties: {
        url: {
          bsonType: "string",
          description: "must be a string and is required"
        },
        domain: {
          bsonType: "string",
          description: "must be a string and is required"
        },
        parent: {
          bsonType: ["string", "null"],
          description: "must be a string or null if it's a root link"
        },
        lastChecked: {
          bsonType: "date",
          description: "must be a date"
        }
      }
    }
  }
});

// Creating indexes for the `links` collection
db.links.createIndex({ url: 1 });
db.links.createIndex({ domain: 1 });
db.links.createIndex({ lastChecked: 1 });



db.createCollection("linkChildren", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: ["parentUrl", "childUrl"],
      properties: {
        parentUrl: {
          bsonType: "string",
          description: "must be a string and is required"
        },
        childUrl: {
          bsonType: "string",
          description: "must be a string and is required"
        }
      }
    }
  }
});

// Creating indexes for the `linkChildren` collection
db.linkChildren.createIndex({ parentUrl: 1 });
db.linkChildren.createIndex({ childUrl: 1 });
